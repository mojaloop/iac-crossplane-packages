apiVersion: netbird.mojaloop.io/v1alpha1
kind: XNetbirdOIDC
metadata:
  name: netbird-oidc-claim
  namespace: netbird
spec:
  parameters:
    # Required FQDNs and Namespace
    netbirdFqdn: "netbird-dashboard.ccinfra1.drpp-onprem.global"
    zitadelFqdn: "zitadel.ccinfra1.drpp-onprem.global"
    netbirdNamespace: "netbird"
    netbirdPreConfigOutputSecret: "netbird-management"

    # Reference to the Secret containing the Admin Human User GUID
    zitadelAdminHumanUserIdRef:
      name: "post-config-output"
      namespace: "zitadel"
      key: "zitadel_admin_human_user_id"

    # RBAC Group mapping (matched to your Zitadel Project Roles)
    adminRbacGroup: "techops-admin"
    userRbacGroup: "techops-users"

    # Reference to the Secret containing the Zitadel Org ID
    organizationIdSecretRef:
      name: "zitadel-post-config-init-output"
      namespace: "zitadel"
      key: "zitadel_org_id"

  # References to the ProviderConfigs configured in your cluster
  providerConfigsRef:
    zitadelProviderName: "zitadel-provider"
    kubernetesProviderName: "kubernetes-provider"

  # Policy allowing Crossplane to manage all lifecycle actions
  managementPolicies:
    - "*"