apiVersion: aws.mojaloop.io/v1alpha1
kind: XRDSCluster
metadata:
  name: example-convn-rds-cluster
  namespace: default
spec:
  managementPolicies:
    - "*"
  providerConfigsRef:
      awsProviderConfigName: "aws-provider"
      ccK8sProviderName: "provider-kubernetes"
      httpProviderConfigName: "http-conf"
  parameters:
    externalServiceName: "example-rds-aurora-cluster"
    caBundleUrl: "https://truststore.pki.rds.amazonaws.com/global/global-bundle.pem"
    consumerAppsNamespaces:
       - mojaloop
       - mcm
    appNamespace: "default"
    allowMajorVersionUpgrade: false
    applyImmediately: false
    backupRetentionPeriod: 7
    databaseName: "exampledb"
    dbClusterInstanceClass: "db.m5d.large"
    deletionProtection: false
    engine: "mysql"
    engineVersion: "8.0.40"
    family: "mysql8.0"
    instanceCount: 0
    parameter:
    - name: character_set_client
      value: utf8mb4
    - name: character_set_server
      value: utf8mb4
    passwordSecret:
      key: "password"
      name: "example-db-secret"
      namespace: "default"
    port: 3306
    preferredBackupWindow: "02:00-04:00"
    preferredMaintenanceWindow: "Tue:23:45-Wed:00:15"
    region: "eu-west-1"
    skipFinalSnapshot: true
    finalSnapshotIdentifier: "example-convn-rds-cluster"
    storageEncrypted: true
    storageType: "io1"
    iops: 5000
    allocatedStorage: 100
    subnets: "subnet-0a2b4a2a0e71ff936,subnet-0e4fe74d1d445e437,subnet-03fec93c6b529f361"
    azs: "eu-west-1a,eu-west-1b,eu-west-1c"
    username: "mojaloop"
    vpcCidr: "10.0.0.0/16"
    vpcId: "vpc-093a94cea27a9ff99"
