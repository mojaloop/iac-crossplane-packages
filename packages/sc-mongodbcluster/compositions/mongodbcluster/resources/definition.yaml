apiVersion: apiextensions.crossplane.io/v1
kind: CompositeResourceDefinition
metadata:
  name: xmongodbcluster.sc.mojaloop.io
spec:
  defaultCompositeDeletePolicy: Foreground
  group: sc.mojaloop.io
  names:
    kind: XMongodbCluster
    plural: xmongodbcluster
  claimNames:
    kind: MongodbCluster
    plural: mongodbcluster
  versions:
  - name: v1alpha1
    served: true
    referenceable: true
    schema:
      openAPIV3Schema:
        type: object
        properties:
          spec:
            type: object
            properties:
              managementPolicies:
                default:
                  - "*"
                description: |-
                  A ManagementAction represents an action that the Crossplane controllers
                  can take on an external resource.
                items:
                  description: |-
                    A ManagementAction represents an action that the Crossplane controllers
                    can take on an external resource.
                  enum:
                    - Observe
                    - Create
                    - Update
                    - Delete
                    - LateInitialize
                    - "*"
                  type: string
                type: array
              providerConfigsRef:
                type: object
                description: |-
                  The name of the provider config to use for the remote and local k8s providers.
                required:
                  - scK8sProviderName
                  - ccK8sProviderName
                properties:
                  ccK8sProviderName:
                    type: string
                    description: |-
                      The name of the provider config to use for the local k8s provider.
                  scK8sProviderName:
                    type: string
                    description: |-
                      The name of the provider config to use for the remote k8s provider.
              parameters:
                type: object
                properties:
                  clusterName:
                    type: string
                    description: Name for the consumer cluster
                  externalServiceName:
                    type: string
                    description: Name for the external service object created
                  appNamespace:
                    type: string
                    description: Namespace for the consumer application
                  dbSecret:
                    type: string
                    description: Secret name for the database credentials
                  crVersion:
                    type: string
                  image:
                    type: string
                  imagePullPolicy:
                    type: string
                  replsets:
                    type: object
                    properties:
                      name:
                        type: string
                      size:
                        type: integer
                      affinity:
                        type: object
                        properties:
                          antiAffinityTopologyKey:
                            type: string
                      expose:
                        type: object
                        properties:
                          enabled:
                            type: boolean
                          type:
                            type: string
                      resources:
                        type: object
                        properties:
                          limits:
                            type: object
                            properties:
                              cpu:
                                type: string
                              memory:
                                type: string
                          requests:
                            type: object
                            properties:
                              cpu:
                                type: string
                              memory:
                                type: string
                      volumeSpec:
                        type: object
                        properties:
                          persistentVolumeClaim:
                            type: object
                            properties:
                              resources:
                                type: object
                                properties:
                                  requests:
                                    type: object
                                    properties:
                                      storage:
                                        type: string
                  sharding:
                    type: object
                    properties:
                      enabled:
                        type: boolean
                      configsvrReplSet:
                        type: object
                        properties:
                          size:
                            type: integer
                          affinity:
                            type: object
                            properties:
                              antiAffinityTopologyKey:
                                type: string
                          resources:
                            type: object
                            properties:
                              limits:
                                type: object
                                properties:
                                  cpu:
                                    type: string
                                  memory:
                                    type: string
                              requests:
                                type: object
                                properties:
                                  cpu:
                                    type: string
                                  memory:
                                    type: string
                          podDisruptionBudget:
                            type: object
                            properties:
                              maxUnavailable:
                                type: integer
                          expose:
                            type: object
                            properties:
                              enabled:
                                type: boolean
                              type:
                                type: string
                          volumeSpec:
                            type: object
                            properties:
                              persistentVolumeClaim:
                                type: object
                                properties:
                                  resources:
                                    type: object
                                    properties:
                                      requests:
                                        type: object
                                        properties:
                                          storage:
                                            type: string
                      mongos:
                        type: object
                        properties:
                          size:
                            type: integer
                          affinity:
                            type: object
                            properties:
                              antiAffinityTopologyKey:
                                type: string
                          resources:
                            type: object
                            properties:
                              limits:
                                type: object
                                properties:
                                  cpu:
                                    type: string
                                  memory:
                                    type: string
                              requests:
                                type: object
                                properties:
                                  cpu:
                                    type: string
                                  memory:
                                    type: string
                          podDisruptionBudget:
                            type: object
                            properties:
                              maxUnavailable:
                                type: integer
                          expose:
                            type: object
                            properties:
                              enabled:
                                type: boolean
                              type:
                                type: string
                  backup:
                    type: object
                    properties:
                      enabled:
                        type: boolean
                      image:
                        type: string
                      bucket:
                        type: string
                      credentialsSecret:
                        type: string
                      region:
                        type: string
